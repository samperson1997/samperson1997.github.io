<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="Blog of Samperson">
  <meta name="keyword" content="">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      论文#3 | A Data-adaptive and Dynamic Segmentation Index for Whole Matching on Time Series | Blog of Samperson
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>Blog of Samperson</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
    <h2>
        论文#3 | A Data-adaptive and Dynamic Segmentation Index for Whole Matching on Time Series
    </h2>
    <p class="post-date">
        2019-07-23
    </p>
    <div class="arrow-down">
        <a href="javascript:;"></a>
    </div>
</div>
<main class="app-body flex-box">
    <!-- Article START -->
    <article class="post-article">
        <section class="markdown-content">
            <p>以下是论文<a href="https://dl.acm.org/citation.cfm?id=2536208" target="_blank" rel="noopener">A Data-adaptive and Dynamic Segmentation Index for Whole Matching on Time Series</a>的笔记。</p>
<p><br></p>
<h2 id="已有方法及改进"><a href="#已有方法及改进" class="headerlink" title="已有方法及改进"></a>已有方法及改进</h2><p>[1] 基于R树的方法、SAX和ISAX：时间序列被划分成等长，所有时间序列以相同方式分段。<br>[2] 已有的索引结构基于的原则：</p>
<ul>
<li>通过<strong>全局切割降维</strong>；</li>
<li>使用下界技术：确保<strong>没有假阴性 (no false negative)</strong>结果</li>
</ul>
<blockquote>
<p>D(·, ·)表示距离算法<br>对于时间序列S，如果DLB(Q, S) &gt; threshold，因为D(Q, S) &gt;= DLB(S1, S2) &gt; threshold，S一定不是相似性查询的结果。</p>
</blockquote>
<p>[3] 改进</p>
<ul>
<li>通过<strong>局部切割降维</strong>可以获得更好的结果从而节约更多的空件和查询响应时间；</li>
<li>使用上界技术和下界技术结合</li>
</ul>
<blockquote>
<p>如果DUB(Q, S) &lt; threshold，不必计算D(Q, S)即可得知S是相似性查询的结果。</p>
</blockquote>
<p><br></p>
<h2 id="APCA和EAPCA"><a href="#APCA和EAPCA" class="headerlink" title="APCA和EAPCA"></a>APCA和EAPCA</h2><p>[1] <strong>APCA</strong> (Adaptive Piecewise Constant Approximation)：快速估计两条时间序列之间的距离<br>[2] <strong>EAPCA</strong>：扩展APCA，加入标准差，可以获得更紧凑的界限</p>
<p><br></p>
<h2 id="DSTree"><a href="#DSTree" class="headerlink" title="DSTree"></a>DSTree</h2><p>[1] <strong>DSTree</strong>(dynamic splitting tree)：为时间序列建立数据自适应、动态分割索引。<br>好处：节约空间和时间，提供时间序列之间距离紧凑的上限和下限。<br>DSTree的内部节点和叶子结点包含信息如下：</p>
<ol>
<li>该节点的子树中索引的时间序列数C</li>
<li>该节点索引的时间序列分段SG</li>
<li>用来计算上下界的Z，zi = (μmin, μmax, σmin, σmax)</li>
<li>叶子结点连接到磁盘文件，该文件存储的时间序列最多为ψ，其中ψ是数据树的叶容量；内部节点有两个指向子节点的指针</li>
<li>内部节点存储<strong>拆分策略SP</strong></li>
</ol>
<p><br></p>
<p>[2] <strong>构建DSTree</strong>：对于长度为n的时间序列</p>
<ol>
<li>初始化：根节点NR，分段SG = (n)，每个时间序列都只包含一个分段</li>
<li>插入：将每个时间序列X分配给叶节点，理想情况下，相似的时间序列分配给相同的叶子结点或子树。<ul>
<li>如果根节点NR是<strong>叶节点</strong>：NR有空间，则访问根节点并将X分配给NR；否则，根据NR的拆分策略SP拆分NR。</li>
<li>如果根节点NR是<strong>内部节点</strong>：选择NR的更适合X的子节点，然后递归搜索直到找到满足的叶节点。</li>
</ul>
</li>
</ol>
<p>[3] 将相似的时间序列放入一个叶子结点可以减少在相似性查询过程中I/O操作的次数。</p>
<p><br></p>
<h2 id="节点拆分策略"><a href="#节点拆分策略" class="headerlink" title="节点拆分策略"></a>节点拆分策略</h2><p>[1] 节点拆分策略<strong>SP</strong> (splitting strategy) = (sid, strategy, measure)</p>
<ul>
<li>sid ∈ [1, m] m为分割中选中的片段数</li>
<li>strategy ∈ {H-split, V-splitL, V-splitR}</li>
<li>measure ∈ {M, SD}</li>
</ul>
<p>[2] 节点拆分仅发生于<strong>叶子节点</strong>没有空间容纳新的时间序列的情况，从而被划分为两个子节点，分配给该节点的时间序列将被分配给拆分过程中创建的两个子节点。</p>
<p><br></p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>如图：N2的SP = (2, V-splitL, M)，表示第二个片段被选择，使用V-split左边的子片段，H-split的平均数划分；N3的SP = (2, H-split, M)，表示第二个片段被选择，使用H-split的平均数划分。</p>
<p><img style="width:100%; max-width:450px; margin-left:auto; margin-right:auto; display:block;" src="https://user-images.githubusercontent.com/19167280/61695684-85870a80-ad66-11e9-986c-a3899aa25ce0.png"></p>
<blockquote>
<ul>
<li>H-split：使用平均数或者标准差划分时间序列，分割保持不变</li>
<li>V-split：首先划分子分割，然后把时间序列按照子分割的平均数聚集</li>
</ul>
</blockquote>
<p><img style="width:100%; max-width:450px; margin-left:auto; margin-right:auto; display:block;" src="https://user-images.githubusercontent.com/19167280/61693390-16a7b280-ad62-11e9-93c0-a11d3fa7122c.png"></p>
<p><br></p>
<h3 id="节点拆分策略的质量度量"><a href="#节点拆分策略的质量度量" class="headerlink" title="节点拆分策略的质量度量"></a>节点拆分策略的质量度量</h3><p>[1] 时间序列Q的<strong>界限范围</strong> (bound range) R(Q) ：<strong>时间序列Q</strong>和<strong>DSTree节点N索引的时间序列</strong>之间的距离的上下界限之间的差距，可以用来代表节点N的上下界限的有效性。</p>
<p><br></p>
<p>[2] Qos：不依赖时间序列，值越小，用于相似性估计的节点的界限的有效性越高。</p>
<p><br></p>
<p>[3] 拆分利益 (splittiing benefit) B = QosN - (Qosl + Qosr) / 2，B越大，拆分策略越好。其中，QosN表示N的Qos值，Qosl和Qosr分别表示将N拆分成Nl和Nr之后的Qos值。</p>
<p><br></p>
<h2 id="查询响应算法"><a href="#查询响应算法" class="headerlink" title="查询响应算法"></a>查询响应算法</h2><h3 id="相似性搜索"><a href="#相似性搜索" class="headerlink" title="相似性搜索"></a>相似性搜索</h3><p>[1] <strong>启发式搜索(heuristic search)</strong>只调查一个<strong>叶子节点</strong>，并找出这个节点中最相似的时间序列。<br><strong>基于：</strong>相似的时间序列常被放在同一个节点中索引（可减少在相似性查询过程中I/O操作的次数）<br><strong>方法：</strong>给定时间序列Q，从根结点开始。如果根节点不是叶子结点，选择NR的更适合Q的子节点，然后递归搜索直到找到满足的叶节点N。计算TSN中每一个时间序列S与Q的距离D(S, Q)，返回距离最短的时间序列。</p>
<blockquote>
<p>启发式搜索不能找到整个数据集中最相似的时间序列。</p>
</blockquote>
<p>[2] <strong>精确搜索(exact search)</strong>：结合启发式搜索和下界距离方法，从而节约空间；</p>
<ol>
<li>使用启发式搜索返回BSF (best-so-far)结果；</li>
<li>创建优先队列pq用来检验可能包含潜在的比BSF更加相似的时间序列的节点，初始仅包括根节点；</li>
<li>从pq中重复取出具有最小的下界距离的节点，直到pq为空，或者下界距离大于等于BSF的距离。如果下界距离大于等于BSF的距离，那么pq中剩下的时间序列不会成为符合条件的最近邻居，因此可以被剪掉<ul>
<li>如果节点是叶子节点，从磁盘中取出时间序列，计算查询时间序列与这些时间序列的距离，记录最小距离。如果最小距离小于BSF，则更新BSF；</li>
<li>如果节点是内部节点，如果子节点与查询时间序列的下界距离小于BSF，则将它的子节点插入pq中。</li>
</ul>
</li>
</ol>
<h3 id="距离分布直方图"><a href="#距离分布直方图" class="headerlink" title="距离分布直方图"></a>距离分布直方图</h3><p>[1] 收集叶子节点的统计信息形成列表L，每一个条目表示落在特定距离范围的时间序列数目。</p>
<p><br></p>
<p>[2] 因为每两个叶子结点都没有公共元素，所以L中没有冗余的信息，从而获得距离分布直方图Distance Distribution Histogram（假设结点中的时间序列均匀分布）</p>
<blockquote>
<p>例如，L = &lt;([10, 20], 10), ([15, 30], 15), ([40, 50], 2)&gt; 表示有3个叶子结点，其中N1包含10条时间序列，与Q的距离在[10, 20]之间。<br>[15, 20]范围内的时间序列数目为：(15 - 10) /  (20 - 10) * 10 +  (20 - 15) / (30 - 15) * 15 = 10。</p>
</blockquote>
<p>[3] 在某些情况下，子节点的下限/上限可能小于/大于父节点的下限/上限，即<strong>父节点中的边界可能比子节点中的边界更紧</strong>。在这些子节点上使用边界会导致子节点的估计不准确。<br><strong>解决方法：</strong>如果一个节点中距离的估计范围是[LB, UB]，而它的父节点中距离的估计范围是[LBp, UBp]，那么[max(LB, LBp)，min(UB, UBp)]是该节点的更严格和正确的范围。</p>
<p><br></p>
<p>[4] <strong>α-level</strong>使用一些内部节点而不是全部叶子节点更快的建立矩形。<br>对于每一个从根到叶子节点的路径，选择第⌈α ∗ H⌉个内部节点生成L。<br>如果路径长度小于⌈α ∗ H⌉，则使用叶节点。</p>

        </section>
        <!-- Tags START -->
        
            <div class="tags">
                <span>Tags:</span>
                
  <a href="/tags#时间序列数据库-论文" >
    <span class="tag-code">时间序列数据库-论文</span>
  </a>

            </div>
            
                <!-- Tags END -->
                <!-- 打赏 START -->
                
                    <div class="money-like">
                        <div class="reward-btn">
                            赏
                            <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
                            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
                            </span>
                        </div>
                        <p class="notice">如果觉得我的文章对您有帮助，欢迎点击上方按钮对我打赏</p>
                    </div>
                    
                        <!-- 打赏 END -->
                        <!-- 二维码 START -->
                        
                                <!-- 二维码 END -->
                                
                                    <!-- Gitment START -->
                                    <div id="comments"></div>
                                    <!-- Gitment END -->
                                    
    </article>
    <!-- Article END -->
    <!-- Catalog START -->
    
        <aside class="catalog-container">
    <div class="toc-main">
        <strong class="toc-title">Catalog</strong>
        
            <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#已有方法及改进"><span class="toc-nav-number">1.</span> <span class="toc-nav-text"><a href="#&#x5DF2;&#x6709;&#x65B9;&#x6CD5;&#x53CA;&#x6539;&#x8FDB;" class="headerlink" title="&#x5DF2;&#x6709;&#x65B9;&#x6CD5;&#x53CA;&#x6539;&#x8FDB;"></a>&#x5DF2;&#x6709;&#x65B9;&#x6CD5;&#x53CA;&#x6539;&#x8FDB;</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#APCA和EAPCA"><span class="toc-nav-number">2.</span> <span class="toc-nav-text"><a href="#APCA&#x548C;EAPCA" class="headerlink" title="APCA&#x548C;EAPCA"></a>APCA&#x548C;EAPCA</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#DSTree"><span class="toc-nav-number">3.</span> <span class="toc-nav-text"><a href="#DSTree" class="headerlink" title="DSTree"></a>DSTree</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#节点拆分策略"><span class="toc-nav-number">4.</span> <span class="toc-nav-text"><a href="#&#x8282;&#x70B9;&#x62C6;&#x5206;&#x7B56;&#x7565;" class="headerlink" title="&#x8282;&#x70B9;&#x62C6;&#x5206;&#x7B56;&#x7565;"></a>&#x8282;&#x70B9;&#x62C6;&#x5206;&#x7B56;&#x7565;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#示例"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text"><a href="#&#x793A;&#x4F8B;" class="headerlink" title="&#x793A;&#x4F8B;"></a>&#x793A;&#x4F8B;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#节点拆分策略的质量度量"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text"><a href="#&#x8282;&#x70B9;&#x62C6;&#x5206;&#x7B56;&#x7565;&#x7684;&#x8D28;&#x91CF;&#x5EA6;&#x91CF;" class="headerlink" title="&#x8282;&#x70B9;&#x62C6;&#x5206;&#x7B56;&#x7565;&#x7684;&#x8D28;&#x91CF;&#x5EA6;&#x91CF;"></a>&#x8282;&#x70B9;&#x62C6;&#x5206;&#x7B56;&#x7565;&#x7684;&#x8D28;&#x91CF;&#x5EA6;&#x91CF;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#查询响应算法"><span class="toc-nav-number">5.</span> <span class="toc-nav-text"><a href="#&#x67E5;&#x8BE2;&#x54CD;&#x5E94;&#x7B97;&#x6CD5;" class="headerlink" title="&#x67E5;&#x8BE2;&#x54CD;&#x5E94;&#x7B97;&#x6CD5;"></a>&#x67E5;&#x8BE2;&#x54CD;&#x5E94;&#x7B97;&#x6CD5;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#相似性搜索"><span class="toc-nav-number">5.1.</span> <span class="toc-nav-text"><a href="#&#x76F8;&#x4F3C;&#x6027;&#x641C;&#x7D22;" class="headerlink" title="&#x76F8;&#x4F3C;&#x6027;&#x641C;&#x7D22;"></a>&#x76F8;&#x4F3C;&#x6027;&#x641C;&#x7D22;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#距离分布直方图"><span class="toc-nav-number">5.2.</span> <span class="toc-nav-text"><a href="#&#x8DDD;&#x79BB;&#x5206;&#x5E03;&#x76F4;&#x65B9;&#x56FE;" class="headerlink" title="&#x8DDD;&#x79BB;&#x5206;&#x5E03;&#x76F4;&#x65B9;&#x56FE;"></a>&#x8DDD;&#x79BB;&#x5206;&#x5E03;&#x76F4;&#x65B9;&#x56FE;</span></a></li></ol></li></ol>
                
    </div>
</aside>

            
                <!-- Catalog END -->
</main>

<script>
    (function() {
        var url = 'http://yoursite.com/2019/07/23/wangpeng-1/';
        var banner = 'https://images.pexels.com/photos/2470678/pexels-photo-2470678.jpeg?h=1280&w=1921'
        if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
            $('#article-banner').css({
                'background-image': 'url(' + banner + ')'
            })
        } else {
            $('#article-banner').geopattern(url)
        }
        $('.header').removeClass('fixed-header')

        // error image
        $(".markdown-content img").on('error', function() {
            $(this).attr('src', 'http://file.muyutech.com/error-img.png')
            $(this).css({
                'cursor': 'default'
            })
        })

        // zoom image
        $(".markdown-content img").on('click', function() {
            var src = $(this).attr('src')
            if (src !== 'http://file.muyutech.com/error-img.png') {
                var imageW = $(this).width()
                var imageH = $(this).height()

                var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
                zoom = zoom < 1 ? 1 : zoom
                zoom = zoom > 2 ? 2 : zoom
                var transY = (($(window).height() - imageH) / 2).toFixed(2)

                $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="' + src + '" /></div></div>')
                $('.image-view-wrap').addClass('wrap-active')
                $('.image-view-wrap img').css({
                    'width': `${imageW}`,
                    'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
                })
                $('html').css('overflow', 'hidden')

                $('.image-view-wrap').on('click', function() {
                    $(this).remove()
                    $('html').attr('style', '')
                })
            }
        })

        // qrcode
        var qr = new QRious({
            element: document.getElementById('share-qrcode'),
            value: document.location.href
        });

        // gitment
        var gitmentConfig = "samperson1997";
        if (gitmentConfig !== 'undefined') {
            var gitment = new Gitment({
                id: "论文#3 | A Data-adaptive and Dynamic Segmentation Index for Whole Matching on Time Series",
                owner: "samperson1997",
                repo: "samperson1997.github.io",
                oauth: {
                    client_id: "fa0bf61cc2d9eb136c1a",
                    client_secret: "81df51391c08edc497b6bb434029521c92ea19fd"
                },
                theme: {
                    render(state, instance) {
                        const container = document.createElement('div')
                        container.lang = "en-US"
                        container.className = 'gitment-container gitment-root-container'
                        container.appendChild(instance.renderHeader(state, instance))
                        container.appendChild(instance.renderEditor(state, instance))
                        container.appendChild(instance.renderComments(state, instance))
                        container.appendChild(instance.renderFooter(state, instance))
                        return container;
                    }
                }
            })
            gitment.render(document.getElementById('comments'))
        }
    })();

</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
    <p class="copyright">
        &copy;
        2019 | Content by <a href="https://samperson1997.github.io/about/">Samperson</a> | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
            <br> Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
    </p>
</footer>

<script>
    function async(u, c) {
        var d = document,
            t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function(e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }

</script>
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function() {
        FastClick.attach(document.body);
    })

</script>

<script>
    var hasLine = 'true';
    async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function() {
        $('figure pre').each(function(i, block) {
            var figure = $(this).parents('figure');
            if (hasLine === 'false') {
                figure.find('.gutter').hide();
            }
            var lang = figure.attr('class').split(' ')[1] || 'code';
            var codeHtml = $(this).html();
            var codeTag = document.createElement('code');
            codeTag.className = lang;
            codeTag.innerHTML = codeHtml;
            $(this).attr('class', '').empty().html(codeTag);
            figure.attr('data-lang', lang.toUpperCase());
            hljs.highlightBlock(block);
        });
    })

</script>
<!-- Baidu Tongji -->

        <script src="/js/script.js"></script>

  </body>
</html>