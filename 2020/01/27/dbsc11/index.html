<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="Blog of Samperson">
  <meta name="keyword" content="">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      ⛵️帆船书#11-1 | 顺序索引 | Blog of Samperson
    
  </title>
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/plugins/gitment.css">
  <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdn.bootcss.com/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script src="/js/qrious.js"></script>
<script src="/js/gitment.js"></script>
</head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>

  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>Blog of Samperson</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/project/" class="item-link">Projects</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/project/" class="menu-link">Projects</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
  </div>
</header>

    <div id="article-banner">
    <h2>
        ⛵️帆船书#11-1 | 顺序索引
    </h2>
    <p class="post-date">
        2020-01-27
    </p>
    <div class="arrow-down">
        <a href="javascript:;"></a>
    </div>
</div>
<main class="app-body flex-box">
    <!-- Article START -->
    <article class="post-article">
        <section class="markdown-content">
            <h2 id="索引的更新"><a href="#索引的更新" class="headerlink" title="索引的更新"></a>索引的更新</h2><h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>[1] 稠密索引:<br>用出现在待插入记录中的搜索码进行查找, 如果不在索引中就在合适的位置插入索引项; 否则:</p>
<ul>
<li>如果索引项存储的是指向具有相同搜索码所有记录的指针, 就在索引项中增加一个指向新记录的指针;</li>
<li>否则索引项存储的是指向具有相同搜索码的第一条记录的指针, 把待插入的记录放到具有相同搜索码的其他记录之后</li>
</ul>
<p>[2] 稀疏索引: 如果系统创建一个新的块, 将新块中出现的第一个搜索码插入到索引中; 如果这条新插入的记录含有块中最小搜索码, 那么系统更新指向该块的索引项, 否则不做任何改动</p>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>[1] 稠密索引: 首先查找要删除的记录, 如果是具有这个搜索码的唯一记录, 就删除相应索引项, 否则:</p>
<ul>
<li>如果索引项存储的是指向具有相同搜索码所有记录的指针, 就在索引项中删除指向被删除记录的指针</li>
<li>否则索引项存储的是指向具有相同搜索码的第一条记录的指针, 如果被删除的记录是具有该搜索码的第一条记录, 系统更新索引项使其指向下一条记录</li>
</ul>
<p>[2] 稀疏索引: 如果索引不包含具有被删除记录搜索码的索引项, 索引不必做任何修改; 否则:</p>
<ul>
<li>如果被删除的记录是具有该搜索码值的唯一记录, 系统用下一个搜索码值的索引记录替换相应索引记录; 如果下一个搜索码值已经有一个索引项, 则<strong>删除</strong>该索引项 (而不是<strong>替换</strong>)</li>
<li>否则如果搜索码的索引记录指向被删除的记录, 就更新索引项使其指向具有相同搜索码的下一条记录</li>
</ul>
<h2 id="B-树索引"><a href="#B-树索引" class="headerlink" title="B+树索引"></a>B+树索引</h2><p>[1] 结构: 平衡树; 多级索引<br>[2] 叶结点: 所有的搜索码值都出现在某个叶结点中 (使得B+树称为稠密索引)<br>非叶结点: 形成叶结点的多级稀疏索引, 结点的指针书称为该结点的<strong>扇出</strong>, 最少<strong>n/2</strong>，最多<strong>n</strong><br>根结点包含指针数可以小于n/2<br>[3] 指针Pn将叶结点按搜索码顺序串在一起, 对文件进行高效顺序处理<br>[4] B+树保证了结点至少半满; 以随机顺序插入, 那么结点在平均情况下会比2/3更满</p>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><p>[1] 步骤</p>
<ol>
<li>检查当前点, 找到最小的i使得搜索码值Ki大于等于V; 假设找到了这样的值:<br>如果Ki等于V, 那么将当前结点置为由Pi+1指向的结点;<br>如果Ki大于V, 那么将当前结点置为由Pi指向的结点</li>
<li>如果没有找到这样的Ki值, V大于等于Km-1, 其中Pm为结点中最后一个非空指针。将当前结点置为由Pm指向的结点<br>重复以上过程知道访问叶结点</li>
<li>叶结点如果包含等于V的搜索码, 令Ki为第一个这样的值, 则Pi指向具有搜索码Ki的记录</li>
<li>否则失败</li>
</ol>
<p>[2] 结点大小一般等于磁盘块大小4KB<br>[3] 与内存中树结构的区别: 结点大, 胖而矮, 读块数少</p>
<h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>[1] 插入与分裂</p>
<ol>
<li>孩子指针的分裂介于原始的和新创建的结点之间<br>位于移动到右边结点的指针之间的搜索码值和指针一起移动<br>位于留在左边的指针呢之间的搜索码值依然不变</li>
<li>确定插入发生的叶结点l, 如果产生分裂, 则将新结点插入结点l的父结点中</li>
</ol>
<p>[2] 删除与合并</p>
<ol>
<li>查找并删除后, 如果结点太小, 递归从父结点中将它删除, 直到树的根结点</li>
<li>B+树的非叶结点中的关键码值可能在树的叶结点中并不存在<br>参与重新分布的兄弟结点越多, 更新的代价越高</li>
</ol>
<p>[3] 复杂性: 与B+树高度成正比, 一次插入的I/O次数正比于log(n/2)(N), n为结点中指针的最大值, N为文件中记录条数。实际情况:</p>
<ul>
<li>一次查询一般只需要一次或两次I/O操作: 大部分非叶结点在被访问时已经在数据库缓冲区中</li>
<li>一次插入需要更新块的I/O操作仅比一次略多: 叶结点分裂的可能性比较小</li>
</ul>
<h3 id="不唯一搜索码"><a href="#不唯一搜索码" class="headerlink" title="不唯一搜索码"></a>不唯一搜索码</h3><p>[1] 一个关系可以拥有多个包含同一搜索码值的记录<br>两条或者多条记录在索引属性上拥有相同的值, 那么该搜索码称为<strong>不唯一搜索码</strong><br>[2] 问题: 删除记录的效率<br>解决方案: 通过创建包含原始搜索码和其他属性的复合搜索码确保搜索码唯一<br><strong>唯一化属性</strong> / 额外属性: 指向记录的指针(<strong>记录号</strong>), 或者是拥有相同搜索码值的所有记录中值唯一的其他属性<br>[3] 不唯一搜索码可以在B+树中只存储一次, 并且为该搜索码值维护一个记录指针的桶<br>优点: 空间上有效<br>缺点: </p>
<ol>
<li>在叶结点保存桶, 需要额外的代码处理可变长的桶;</li>
<li>如果桶存储在单独的块中, 获取记录时可能需要额外的I/O操作;</li>
<li>搜索码值出现次数较多, 记录删除效率不高</li>
</ol>
<h2 id="B-树索引扩展"><a href="#B-树索引扩展" class="headerlink" title="B+树索引扩展"></a>B+树索引扩展</h2><h3 id="B-树文件组织"><a href="#B-树文件组织" class="headerlink" title="B+树文件组织"></a>B+树文件组织</h3><p>[1] 索引顺序文件组织缺点: 文件增大时, 索引记录存储在溢出块中, 性能下降<br>[2] B+树文件组织的叶结点存储记录</p>
<ul>
<li>叶结点存储的记录数目比非叶结点存储的指针数目少 (记录比指针大)</li>
<li>树中相邻叶结点可能分布在磁盘中的不同位置, 随着不断进行插入和删除操作, 对叶结点顺序访问需要越来越频繁的等待磁盘寻道——解决: 对索引<strong>重建</strong></li>
<li>存储大型数据对象: 拆分成小的记录序列并组织成B+树, 按序编号, 或者根据记录在大型对象中字节偏移量进行编号, 编号用作搜索码</li>
</ul>
<p>[3] 辅助索引和记录重定位</p>
<ul>
<li>即使记录没有更新, B+树文件组织也可能改变记录的位置,<br>例如: 分裂后一些记录移动到新的结点, 所有存储了指向重定位过的记录的指针的<strong>辅助索引</strong>都必须更新<br>一个叶结点的分裂可能需要几十甚至几百次I/O操作来更新辅助索引</li>
<li>解决方案: 辅助索引不存储指向被索引的记录的指针, 而是存储<strong>主索引搜索码属性的值</strong><br>例如instructor关系上ID为主索引, dept为辅助索引, 辅助索引中与每个系的名字存放在一起的事相应记录中ID值构成的列表, 而不是指向这些记录的指针</li>
<li>查询: 首先用堵住索引找到<strong>主索引搜索码的值</strong>, 然后用住索引找到对应的记录</li>
</ul>
<h3 id="B-树索引的批量加载"><a href="#B-树索引的批量加载" class="headerlink" title="B+树索引的批量加载"></a>B+树索引的批量加载</h3><p>基于项排序+自底向上构建<br>[1] 索引的<strong>批量加载</strong>: 将大量项一次插入到索引中</p>
<ol>
<li>创建一个含有关系索引项的临时文件</li>
<li>根据构建好的索引的搜索码排序文件, 好处: 所有到特定叶结点的项连续出现, 并且叶结点只需要写出一次</li>
<li>扫描排序好的文件并将项插入到索引中</li>
</ol>
<p>如果B+树开始为空, 批量加载时结点不需要从磁盘中读取, 即便很多项需要插入到一个结点中, 每一个叶结点只需要一次I/O操作<br>[2] 从叶子级<strong>自底向上</strong>构建B+树:</p>
<ol>
<li>排序好的项分解到块中, 保证每个块中有尽可能多的项, 由此产生的块形成B+树的叶级</li>
<li>每个块中最小值以及指向块的指针用来构建下一级的B+树项, 并且指向块</li>
</ol>
<p>[3] 建议关系上的索引(除主码上的索引)先删除, 并且插入元组后重新构建索引</p>
<h3 id="B树索引"><a href="#B树索引" class="headerlink" title="B树索引"></a>B树索引</h3><p>[1] 在B-Tree中按key检索数据：首先从根结点进行<strong>二分查找</strong>, 如果找到则返回对应结点的data,<br>否则对相应区间的指针指向的结点递归进行查找, 直到找到结点或找到null指针, 前者查找成功, 后者查找失败<br>[2] B树与B+Tree区别:</p>
<table>
<thead>
<tr>
<th style="text-align:left">B+树</th>
<th style="text-align:left">B树</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">每个结点指针上限为2d+1</td>
<td style="text-align:left">每个结点指针上限为2d</td>
</tr>
<tr>
<td style="text-align:left">内结点不存储data, 只存储key, B+树中叶结点和内结点一般大小不同</td>
<td style="text-align:left">不同结点存放的key和指针可能数量不一致，但是每个结点的域和上限是一致的, 所以在实现中B树往往对每个结点申请同等大小的空间</td>
</tr>
<tr>
<td style="text-align:left">叶子结点不存储指针, 数据库系统或文件系统中使用的B+Tree结构增加了顺序访问指针, 形成了<strong>带有顺序访问指针</strong>的B+Tree, 作用: 提高<strong>区间访问</strong>的性能</td>
<td style="text-align:left">只允许搜索码值出现一次, 相应使用更少的树结点</td>
</tr>
<tr>
<td style="text-align:left">查找需要遍历从树根到叶结点的路径</td>
<td style="text-align:left">不需要遍历到叶结点, 由于B树扇出小, 深度大, 因此查询某些搜索码比B+树块, 另一些慢</td>
</tr>
<tr>
<td style="text-align:left">被删除的项总是出现在叶结点中</td>
<td style="text-align:left">必须从包含被删除项的<strong>子树</strong>中选择正确的值来作为替代</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left">MySql使用B+Tree而不是BTree索引</td>
</tr>
</tbody>
</table>
<p>[3] 优点: 支持的数据量大，压缩效果好，可以更多的索引放在内存中，以保证每次查询小于等于1的读盘次数<br>[4] 缺点: 索引查找(hit和miss相同)、索引创建的性能、数据库的写入性能慢</p>
<blockquote>
<p>B+Tree索引可以用于使用 =, &gt;, &gt;=, &lt;, &lt;= 或者 BETWEEN 运算符的列比较<br>如果 LIKE 的参数是一个<strong>没有以通配符起始的常量字符串</strong>的话也可以使用这种索引</p>
</blockquote>
<h3 id="字符串上的索引和闪存"><a href="#字符串上的索引和闪存" class="headerlink" title="字符串上的索引和闪存"></a>字符串上的索引和闪存</h3><p>[1] 字符串上的索引</p>
<ul>
<li>字符串变长: 结点的合并和重新分布取决于结点中空间使用的比例, 而不是结点所能容纳的最大项数</li>
<li>字符串很长导致结点扇出降低, 增加树的高度: 使用<strong>前缀压缩</strong>技术, 只存储搜索码的前缀, 使得这个前缀足以将由该搜索码分开的两棵子树的码值区分开</li>
</ul>
<p>[2] 闪存</p>
<ul>
<li>通过块组织, B+树索引结构的结点大小比磁盘<strong>小</strong>得多(因为数据查找快)</li>
<li>缺点: 不允许物理层数据就地更新, 每次更新操作转化为<strong>整个闪存块的拷贝+写操作</strong>, 要求块的旧拷贝随后清除(1ms)</li>
</ul>

        </section>
        <!-- Tags START -->
        
            <div class="tags">
                <span>Tags:</span>
                
  <a href="/tags#数据库系统概念" >
    <span class="tag-code">数据库系统概念</span>
  </a>

            </div>
            
                <!-- Tags END -->
                <!-- 打赏 START -->
                
                    <div class="money-like">
                        <div class="reward-btn">
                            赏
                            <span class="money-code">
            <span class="alipay-code">
              <div class="code-image"></div>
              <b>使用支付宝打赏</b>
            </span>
                            <span class="wechat-code">
              <div class="code-image"></div>
              <b>使用微信打赏</b>
            </span>
                            </span>
                        </div>
                        <p class="notice">如果觉得我的文章对您有帮助，欢迎点击上方按钮对我打赏</p>
                    </div>
                    
                        <!-- 打赏 END -->
                        <!-- 二维码 START -->
                        
                                <!-- 二维码 END -->
                                
                                    <!-- Gitment START -->
                                    <div id="comments"></div>
                                    <!-- Gitment END -->
                                    
    </article>
    <!-- Article END -->
    <!-- Catalog START -->
    
        <aside class="catalog-container">
    <div class="toc-main">
        <strong class="toc-title">Catalog</strong>
        
            <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#索引的更新"><span class="toc-nav-number">1.</span> <span class="toc-nav-text"><a href="#&#x7D22;&#x5F15;&#x7684;&#x66F4;&#x65B0;" class="headerlink" title="&#x7D22;&#x5F15;&#x7684;&#x66F4;&#x65B0;"></a>&#x7D22;&#x5F15;&#x7684;&#x66F4;&#x65B0;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#插入"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text"><a href="#&#x63D2;&#x5165;" class="headerlink" title="&#x63D2;&#x5165;"></a>&#x63D2;&#x5165;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#删除"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text"><a href="#&#x5220;&#x9664;" class="headerlink" title="&#x5220;&#x9664;"></a>&#x5220;&#x9664;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#B-树索引"><span class="toc-nav-number">2.</span> <span class="toc-nav-text"><a href="#B-&#x6811;&#x7D22;&#x5F15;" class="headerlink" title="B+&#x6811;&#x7D22;&#x5F15;"></a>B+&#x6811;&#x7D22;&#x5F15;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#查询"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text"><a href="#&#x67E5;&#x8BE2;" class="headerlink" title="&#x67E5;&#x8BE2;"></a>&#x67E5;&#x8BE2;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#更新"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text"><a href="#&#x66F4;&#x65B0;" class="headerlink" title="&#x66F4;&#x65B0;"></a>&#x66F4;&#x65B0;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#不唯一搜索码"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text"><a href="#&#x4E0D;&#x552F;&#x4E00;&#x641C;&#x7D22;&#x7801;" class="headerlink" title="&#x4E0D;&#x552F;&#x4E00;&#x641C;&#x7D22;&#x7801;"></a>&#x4E0D;&#x552F;&#x4E00;&#x641C;&#x7D22;&#x7801;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#B-树索引扩展"><span class="toc-nav-number">3.</span> <span class="toc-nav-text"><a href="#B-&#x6811;&#x7D22;&#x5F15;&#x6269;&#x5C55;" class="headerlink" title="B+&#x6811;&#x7D22;&#x5F15;&#x6269;&#x5C55;"></a>B+&#x6811;&#x7D22;&#x5F15;&#x6269;&#x5C55;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#B-树文件组织"><span class="toc-nav-number">3.1.</span> <span class="toc-nav-text"><a href="#B-&#x6811;&#x6587;&#x4EF6;&#x7EC4;&#x7EC7;" class="headerlink" title="B+&#x6811;&#x6587;&#x4EF6;&#x7EC4;&#x7EC7;"></a>B+&#x6811;&#x6587;&#x4EF6;&#x7EC4;&#x7EC7;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#B-树索引的批量加载"><span class="toc-nav-number">3.2.</span> <span class="toc-nav-text"><a href="#B-&#x6811;&#x7D22;&#x5F15;&#x7684;&#x6279;&#x91CF;&#x52A0;&#x8F7D;" class="headerlink" title="B+&#x6811;&#x7D22;&#x5F15;&#x7684;&#x6279;&#x91CF;&#x52A0;&#x8F7D;"></a>B+&#x6811;&#x7D22;&#x5F15;&#x7684;&#x6279;&#x91CF;&#x52A0;&#x8F7D;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#B树索引"><span class="toc-nav-number">3.3.</span> <span class="toc-nav-text"><a href="#B&#x6811;&#x7D22;&#x5F15;" class="headerlink" title="B&#x6811;&#x7D22;&#x5F15;"></a>B&#x6811;&#x7D22;&#x5F15;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#字符串上的索引和闪存"><span class="toc-nav-number">3.4.</span> <span class="toc-nav-text"><a href="#&#x5B57;&#x7B26;&#x4E32;&#x4E0A;&#x7684;&#x7D22;&#x5F15;&#x548C;&#x95EA;&#x5B58;" class="headerlink" title="&#x5B57;&#x7B26;&#x4E32;&#x4E0A;&#x7684;&#x7D22;&#x5F15;&#x548C;&#x95EA;&#x5B58;"></a>&#x5B57;&#x7B26;&#x4E32;&#x4E0A;&#x7684;&#x7D22;&#x5F15;&#x548C;&#x95EA;&#x5B58;</span></a></li></ol></li></ol>
                
    </div>
</aside>

            
                <!-- Catalog END -->
</main>

<script>
    (function() {
        var url = 'http://yoursite.com/2020/01/27/dbsc11/';
        var banner = 'https://images.pexels.com/photos/2470678/pexels-photo-2470678.jpeg?h=1280&w=1921'
        if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
            $('#article-banner').css({
                'background-image': 'url(' + banner + ')'
            })
        } else {
            $('#article-banner').geopattern(url)
        }
        $('.header').removeClass('fixed-header')

        // error image
        $(".markdown-content img").on('error', function() {
            $(this).attr('src', 'http://file.muyutech.com/error-img.png')
            $(this).css({
                'cursor': 'default'
            })
        })

        // zoom image
        $(".markdown-content img").on('click', function() {
            var src = $(this).attr('src')
            if (src !== 'http://file.muyutech.com/error-img.png') {
                var imageW = $(this).width()
                var imageH = $(this).height()

                var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
                zoom = zoom < 1 ? 1 : zoom
                zoom = zoom > 2 ? 2 : zoom
                var transY = (($(window).height() - imageH) / 2).toFixed(2)

                $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="' + src + '" /></div></div>')
                $('.image-view-wrap').addClass('wrap-active')
                $('.image-view-wrap img').css({
                    'width': `${imageW}`,
                    'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
                })
                $('html').css('overflow', 'hidden')

                $('.image-view-wrap').on('click', function() {
                    $(this).remove()
                    $('html').attr('style', '')
                })
            }
        })

        // qrcode
        var qr = new QRious({
            element: document.getElementById('share-qrcode'),
            value: document.location.href
        });

        // gitment
        var gitmentConfig = "samperson1997";
        if (gitmentConfig !== 'undefined') {
            var gitment = new Gitment({
                id: "⛵️帆船书#11-1 | 顺序索引",
                owner: "samperson1997",
                repo: "samperson1997.github.io",
                oauth: {
                    client_id: "649cae277b0b34f46d41",
                    client_secret: "0d4bede9a22b662219ad576e375373578e4ec259"
                },
                theme: {
                    render(state, instance) {
                        const container = document.createElement('div')
                        container.lang = "en-US"
                        container.className = 'gitment-container gitment-root-container'
                        container.appendChild(instance.renderHeader(state, instance))
                        container.appendChild(instance.renderEditor(state, instance))
                        container.appendChild(instance.renderComments(state, instance))
                        container.appendChild(instance.renderFooter(state, instance))
                        return container;
                    }
                }
            })
            gitment.render(document.getElementById('comments'))
        }
    })();

</script>

    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
    <p class="copyright">
        &copy; 2017-2020 | Content by <a href="https://samperson1997.github.io/about/">Samperson</a> | Proudly powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <br> Theme by <a href="https://github.com/yanm1ng">yanm1ng</a>
    </p>
</footer>

<script>
    function async(u, c) {
        var d = document,
            t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function(e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }

</script>
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function() {
        FastClick.attach(document.body);
    })

</script>

<script>
    var hasLine = 'true';
    async("//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js", function() {
        $('figure pre').each(function(i, block) {
            var figure = $(this).parents('figure');
            if (hasLine === 'false') {
                figure.find('.gutter').hide();
            }
            var lang = figure.attr('class').split(' ')[1] || 'code';
            var codeHtml = $(this).html();
            var codeTag = document.createElement('code');
            codeTag.className = lang;
            codeTag.innerHTML = codeHtml;
            $(this).attr('class', '').empty().html(codeTag);
            figure.attr('data-lang', lang.toUpperCase());
            hljs.highlightBlock(block);
        });
    })

</script>
<!-- Baidu Tongji -->

        <script src="/js/script.js"></script>

  </body>
</html>